<div class="accordion accordion-flush text-white  mt-1 mb-3" id="acordion" *ngIf="(sensors$ | async); let sensors">
    <div class="accordion-item">
        <div class="accordion-header mt-0 justify-content-center" id="flush-heading{{node._id}}" data-toggle="collapse" style="background-color: #6b6b6b;">
            <div class="row">
                <div class="col-9 pl-3">
                    <a class="accordion-button collapsed text-white" style="text-decoration: none; text-decoration-color: none; pointer-events: auto;" type="button" data-bs-toggle="collapse" href="#flush-collapse{{node._id}}" aria-expanded="false" aria-controls="flush-collapseOne">
                        <!-- ARREGLAR ETIQUETA "A", AL APRETAR ENCIMA DE LA ROW, REDIRECCIONA LA PAGINA Y DEBERIA SOLO DESPLEGAR EL ACCORDION-BODY -->
                        <div class="row">
                            <div class="col-6 mt-3" style="font-size: 15px;">{{'Nodo ' + node?.number?.toString()}}</div>
                            <div class="col-6 mt-2">
                                <div class="text-left" style="font-family: 'Raleway'; font-size: 11px;">
                                    <p class="text-center">{{node?.lastSync | date: "HH:mm \n d/MM/yyyy"}}</p>
                                </div>
                            </div>
                        </div>
                    </a>
                </div>
                <div class="col-3 mt-3"> <!-- (hora actual > (lastSync + 4*ds))? KPI gray; KPI green --> 
                    <!--<ng-container *ngIf="(moment > (momentNode + (4*node?.ds))); else elseTemplate2"> <!-- INACTIVE 
                        <div class="circulo mt-1" style="background-color: gray; color: white;">{{sensors.length}}</div>
                    </ng-container>
                    <ng-template #elseTemplate2> <!-- (hora actual > (lastSync + 3*ds))? KPI red; KPI green 
                        <ng-container *ngIf="(moment > (momentNode + (3*node?.ds))); else elseTemplate3"> <!-- DANGER ACTIVE 
                            <div class="circulo mt-1" style="background-color: #FF0000; color: white;">{{sensors.length}}</div>
                        </ng-container>
                        <ng-template #elseTemplate3> <!-- (hora actual > (lastSync + 2*ds))? KPI yellow; KPI green 
                            <ng-container *ngIf="(moment > (momentNode + (2*node?.ds))); else elseTemplate4"> <!-- WARNING ACTIVE 
                                <div class="circulo mt-1" style="background-color: #EEB72B; color: white;">{{sensors.length}}</div>
                            </ng-container>
                            <ng-template #elseTemplate4> <!-- ACTIVE -->
                                <ng-container *ngIf="node?.ds == 900; else elseTemplate5">
                                    <div class="circulo mt-1" style="background-color: #87FF10;">{{sensors.length}}</div>
                                </ng-container>
                                <ng-template #elseTemplate5>
                                    <div class="circulo mt-1" style="background-color: #87FF10;">{{sensors.length}}</div>
                                </ng-template>
                            <!--</ng-template>
                        </ng-template>
                    </ng-template>-->
                </div>
            </div>
        </div>
        <div id="flush-collapse{{node._id}}" class="accordion-collapse collapse" data-bs-parent="#acordion">
            <div class="accordion-body" data-bs-parent="#acordion" style="background-color: #9F9F9F;padding: 0.2rem;">
                <div class="overflow-scroll">
                    <ng-container *ngIf="node?.crop; else Template2" style="font-family: 'Raleway';">
                        <p class="mt-2 mb-0 text-center" style="font-size: 15px;">{{'Cultivo asociado: '}}</p>
                        <p class="mb-2 text-center" style="font-size: 14px;">{{node?.crop}}</p>
                    </ng-container>
                    <ng-template #Template2 style="font-family: 'Raleway';">
                        <p class="mt-2 mb-0 text-center" style="font-size: 15px;">{{'Cultivo asociado: '}}</p>
                        <p class="mb-2 text-center" style="font-size: 14px;">{{'Ningun cultivo asociado'}}</p>
                    </ng-template>
                    <ul class="list-group list-group-flush"  *ngFor="let sensor of sensors">
                        <app-sensor-card [sensor]="sensor" [sectorId]="node?.sectorId"></app-sensor-card>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>